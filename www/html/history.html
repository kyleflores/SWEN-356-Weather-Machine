<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Disables zooming -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>The Weather Machine</title>
    
    <!-- Bootstrap's CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <!-- Webpage Address Icon -->
    <link rel="shortcut icon" href="https://cdn1.iconfinder.com/data/icons/hawcons/32/698868-icon-132-cloud-128.png" />
    <style>
        #content {
            padding-top: 50px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="./index.html">The Weather Machine</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="./status.html">Status</a>
                    </li>
                    <li class="active">
                        <a href="./history.html">History</a>
                    </li>
                    <li>
                        <a href="./settings.html">Settings</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    

    
    <div class="container" id="content">
        <h1>History</h1>
        <p class="lead">View the historical weather data associated with your device.</p>
        <div class="panel panel-default">
            <ul class="nav nav-tabs">
                <li class="nav-item" id="tempTab">
                    <a class="nav-link" href="#tHist">Temperature</a>
                </li>
                <li class="nav-item" id="pressureTab">
                    <a class="nav-link" href="#pHist">Pressure</a>
                </li>
                <li class="nav-item"  id="humidTab">
                    <a class="nav-link" href="#hHist">Humidity</a>
                </li>
                <li class="nav-item" id="luxTab">
                    <a class="nav-link" href="#lHist">Lux</a>
                </li>
            </ul>
            
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane" id="tHist">
                    <table class=table>
                        <thead>
                            <th>Time</th> 
                            <th>Value</th> 
                        </thead>
                        <tbody>
                            <tr>
                                <td>5:00</td>
                                <td>500 degrees</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="pHist">
                    <table class=table>
                        <thead>
                            <th>Time</th> 
                            <th>Value</th> 
                        </thead>
                        <tbody>
                            <tr>
                                <td>5:00</td>
                                <td>500 degrees</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="hHist">
                    <table class=table>
                        <thead>
                            <th>Time</th> 
                            <th>Value</th> 
                        </thead>
                        <tbody>
                            <tr>
                                <td>5:00</td>
                                <td>500 degrees</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="lHist">
                    <table class=table>
                        <thead>
                            <th>Time</th> 
                            <th>Value</th> 
                        </thead>
                        <tbody>
                            <tr>
                                <td>5:00</td>
                                <td>500 degrees</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--  {% for data in Data %} -->
            <!--<table class=table> 
                <thead> 
                    <tr> 
                        <th>Data Type</th> 
                        <th>Value</th> 
                    </tr> 
                </thead> 
                <tbody> 
                    <tr id="temp"> 
                        <td>Temperature</td> 
                        <td id="tempData"></td>
                        <div id="tInfo">
                            <p>Temperature Suggestion</p>
                        </div>
                    </tr> 
                    <tr id="pressure"> 
                        <td>Pressure</td>
                        <td id="baroData">
                            <div id="pInfo">
                                <p>Pressure Suggestion</p>
                            </div>
                        </td>
                        
                    </tr>
                    <tr id="humid"> 
                        <td>Humidity</td> 
                        <td id="humidData"></td>
                        <div id="hInfo">
                            <p>Humidity Suggestion</p>
                        </div>
                    </tr> 
                    <tr id="lux"> 
                        <td>Luxometer</td> 
                        <td id="luxData"></td>
                        <div id="lInfo">
                            <p>Lux Suggestion</p>
                        </div>
                    </tr>
                </tbody> 
            </table> -->
            <!-- {% endfor %} -->
    </div>

    <!-- jQuery must be called first because Boostrap relies on it -->
    <script src="js/jquery-1.12.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            $.ajax({
                url: "json/history.json",
                dataType: "json",
                success: function(data) {
                    var weatherdata = data;

                    $('#tempData').html(weatherdata.irtemp.ambtemp + "&deg;" + " Celsius");
                    $('#baroData').html(weatherdata.baro.pressure + " hPa");
                    $('#humidData').html(weatherdata.humid.humidity + "&#37;" + " RH");
                    $('#luxData').html(weatherdata.opti.light + " lux");
                }
            });
        });
        
        // Once the timer runs out, grabs new data.
        function refreshData(interval) {
            return setInterval(grabData, interval);
        }
        
        // Makes and AJAX call and refreshes the information on the page.
        function grabData() {
            $.ajax({
                url: "json/history.json",
                dataType: "json",
                success: function(data) {
                    var weatherdata = data;

                    $('#tempData').html(weatherdata.irtemp.ambtemp + "&deg;" + " Celsius");
                    $('#baroData').html(weatherdata.baro.pressure + " hPa");
                    $('#humidData').html(weatherdata.humid.humidity + "&#37;" + " RH");
                    $('#luxData').html(weatherdata.opti.light + " lux");
                }
            });
        }
        
        // Calls the refresh data function every minute.
        var timer = refreshData(60000);
        
        $('#tempTab a').click(function (e) {
          e.preventDefault()
          $(this).tab('show')
        });
        
        $('#pressureTab a').click(function (e) {
          e.preventDefault()
          $(this).tab('show')
        });
        
        $('#humidTab a').click(function (e) {
          e.preventDefault()
          $(this).tab('show')
        });
        
        $('#luxTab a').click(function (e) {
          e.preventDefault()
          $(this).tab('show')
        });
    </script>
</body>
</html>
